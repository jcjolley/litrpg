# Application
quarkus.application.name=litrpg-api

# REST API root path - CloudFront routes /api/* to this Lambda
quarkus.http.root-path=/api

# Native Build Configuration
quarkus.native.container-build=true
quarkus.native.builder-image=quay.io/quarkus/ubi-quarkus-graalvmce-builder-image:jdk-21
quarkus.native.container-runtime=docker
quarkus.package.jar.enabled=false

# AWS DynamoDB - uses environment credentials by default for local dev
# For prod, set AWS_CREDENTIALS_TYPE=default to use IAM role
quarkus.dynamodb.aws.region=${AWS_REGION:us-east-1}
quarkus.dynamodb.aws.credentials.type=static
quarkus.dynamodb.aws.credentials.static-provider.access-key-id=${AWS_ACCESS_KEY_ID:test}
quarkus.dynamodb.aws.credentials.static-provider.secret-access-key=${AWS_SECRET_ACCESS_KEY:test}
quarkus.dynamodb.endpoint-override=${DYNAMODB_ENDPOINT:http://localhost:4566}
dynamodb.table.name=${DYNAMODB_TABLE_NAME:litrpg-books-dev}

# Disable dev services - we manage our own LocalStack
quarkus.dynamodb.devservices.enabled=false

# Production profile - uses IAM role credentials (Lambda execution role)
%prod.quarkus.dynamodb.aws.credentials.type=default
%prod.quarkus.dynamodb.endpoint-override=

# CORS (for local dev only - API Gateway handles in prod)
%dev.quarkus.http.cors=true
%dev.quarkus.http.cors.origins=http://localhost:5173,http://localhost:5174,http://localhost:5175
%dev.quarkus.http.cors.methods=GET,POST,OPTIONS
%dev.quarkus.http.cors.headers=Content-Type
